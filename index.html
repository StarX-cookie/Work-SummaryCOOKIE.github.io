<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2025年度工作总结 - 曲治芳 </title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg-color: #f4f7f6;
            --card-bg: #ffffff;
            --primary-blue: #1890ff;
            /* 颜色定义 */
            --teaching-color: #52c41a; 
            --rd-color: #722ed1;       
            --recruit-color: #f5222d;  
            --meeting-color: #fa8c16;  
            --other-color: #8c8c8c;    
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 10px 20px;
            color: #333;
            height: 100vh;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
        }

        /* --- Header 修改：标题居中 --- */
        header {
            background: linear-gradient(135deg, #001529, #003a8c);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            margin-bottom: 10px;
            display: flex;
            justify-content: center; /* 核心：内容居中 */
            align-items: center;
            flex-shrink: 0;
            position: relative; /* 为右侧绝对定位做参照 */
        }

        .header-title-group {
            display: flex; 
            align-items: center; 
            gap: 10px;
        }

        header h1 {
            margin: 0;
            font-size: 1.4rem;
        }

        .header-right-stat {
            position: absolute; /* 绝对定位到右侧 */
            right: 20px;
            margin: 0;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        /* 导航按键区域 */
        .nav-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 6px;
            margin-bottom: 10px;
            flex-shrink: 0;
        }

        .nav-btn {
            border: none;
            background: white;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.2s;
            color: #595959;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .nav-btn:hover {
            transform: translateY(-1px);
            color: var(--primary-blue);
        }

        .nav-btn.active {
            background: var(--primary-blue);
            color: white;
        }

        .nav-btn.summary-btn.active {
            background: #faad14;
            color: #000;
        }

        /* 主内容区 */
        .main-content {
            background: var(--card-bg);
            border-radius: 8px;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            flex-grow: 1;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .view-section {
            display: none;
            height: 100%;
            flex-direction: column; /* 允许内部垂直排列 */
        }
        .view-section.active-view {
            display: flex; /* 修改为 flex 以支持内部布局 */
        }

        /* --- 新增：摘要数据卡片样式 --- */
        .summary-cards {
            display: flex;
            justify-content: space-between;
            gap: 15px;
            margin-bottom: 15px;
            flex-shrink: 0; /* 防止被压缩 */
        }

        .s-card {
            flex: 1;
            background: #fcfcfc;
            border-radius: 6px;
            padding: 12px 10px;
            text-align: center;
            border-top: 3px solid #ccc;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
        }

        .s-card h5 { margin: 0 0 5px 0; font-size: 13px; color: #666; font-weight: normal; }
        .s-card .num { font-size: 18px; font-weight: bold; display: block; margin-bottom: 2px; }
        .s-card .pct { font-size: 12px; color: #888; }

        /* 全年图表区域 */
        .chart-wrapper {
            position: relative;
            width: 100%;
            flex-grow: 1; /* 自动填充剩余空间 */
            min-height: 0; /* 修复 flex 子元素高度溢出问题 */
        }

        /* 月份布局 */
        .month-layout {
            display: flex;
            gap: 20px;
            height: 100%;
            width: 100%;
        }

        .calendar-side {
            flex: 2;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            border-bottom: 1px solid #eee;
            padding-bottom: 5px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            align-content: start;
        }

        .day-card {
            height: 36px;
            border-radius: 4px;
            display: flex;
            align-items: center;
            padding: 0 10px;
            color: white;
            font-size: 12px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            transition: transform 0.2s;
            overflow: hidden;
            white-space: nowrap;
        }

        .day-card:hover {
            transform: scale(1.02);
            filter: brightness(1.1);
        }

        .day-card i {
            font-size: 14px;
            margin-right: 8px;
            width: 16px;
            text-align: center;
        }

        .details-side {
            flex: 1;
            background: #fcfcfc;
            padding: 15px;
            border-radius: 6px;
            border-left: 3px solid var(--primary-blue);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .raw-text-box {
            background: white;
            padding: 10px;
            border-radius: 4px;
            border: 1px dashed #ccc;
            margin-top: 10px;
            font-family: "Courier New", monospace;
            color: #555;
            font-size: 12px;
            line-height: 1.5;
        }

        .stat-list { list-style: none; padding: 0; margin: 0; }
        .stat-item { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #eee; font-size: 13px; }
        .tag { padding: 1px 6px; border-radius: 3px; color: white; font-size: 11px; }

        /* 颜色类 */
        .bg-teaching { background-color: var(--teaching-color); }
        .bg-rd { background-color: var(--rd-color); }
        .bg-recruit { background-color: var(--recruit-color); }
        .bg-meeting { background-color: var(--meeting-color); }
        .bg-other { background-color: var(--other-color); }
        
        h3, h4 { margin: 10px 0 5px 0; font-size: 14px; color: #444; }

    </style>
</head>
<body>

    <header>
        <div class="header-title-group">
            <i class="fas fa-star" style="font-size: 1.2rem;"></i>
            <h1>2025年度工作总结 - 曲治芳</h1>
        </div>
        <p class="header-right-stat">工作日总计：<span style="font-weight:bold; font-size:1.1em;">242</span> 天</p>
    </header>

    <div class="nav-container" id="nav-box">
        <button class="nav-btn summary-btn active" onclick="switchView('summary', this)">
            <i class="fas fa-chart-pie"></i> 全年总览
        </button>
        </div>

    <div class="main-content">
        <div id="view-summary" class="view-section active-view">
            <div class="summary-cards">
                <div class="s-card" style="border-top-color: var(--rd-color);">
                    <h5><i class="fas fa-flask"></i> 课程研发</h5>
                    <span class="num" style="color: var(--rd-color);">82天</span>
                    <span class="pct">33.9%</span>
                </div>
                <div class="s-card" style="border-top-color: var(--teaching-color);">
                    <h5><i class="fas fa-book"></i> 教学实施</h5>
                    <span class="num" style="color: var(--teaching-color);">72天</span>
                    <span class="pct">29.8%</span>
                </div>
                <div class="s-card" style="border-top-color: var(--recruit-color);">
                    <h5><i class="fas fa-user-plus"></i> 招聘与培训</h5>
                    <span class="num" style="color: var(--recruit-color);">39天</span>
                    <span class="pct">16.1%</span>
                </div>
                <div class="s-card" style="border-top-color: var(--meeting-color);">
                    <h5><i class="fas fa-sitemap"></i> 体系与流程</h5>
                    <span class="num" style="color: var(--meeting-color);">28天</span>
                    <span class="pct">11.6%</span>
                </div>
            </div>

            <div class="chart-wrapper">
                <canvas id="yearChart"></canvas>
            </div>
            <div style="text-align:center; margin-top:5px; font-size:12px; color:#666; flex-shrink:0;">
                数据来源：年度总结文档 Page 4
            </div>
        </div>

        <div id="view-month" class="view-section">
            <div class="month-layout">
                <div class="calendar-side">
                    <div class="calendar-header">
                        <h3 id="month-title" style="margin:0; color:#003a8c;"></h3>
                        <span style="font-size:12px; color:#888;">
                            <i class="fas fa-square"></i> 1个方块 = 1天
                        </span>
                    </div>
                    <div id="calendar-grid" class="calendar-grid"></div>
                </div>

                <div class="details-side">
                    <h3><i class="fas fa-list-ul"></i> 分项统计</h3>
                    <ul class="stat-list" id="month-stat-list"></ul>
                    
                    <h4 style="margin-top:15px;"><i class="fas fa-file-alt"></i> 工作内容总结</h4>
                    <div class="raw-text-box" id="month-raw-text"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 数据源 
        const yearData = {
            1: { totalDays: 20, raw: "1天会议, 1天学期结课, 3天教研流程优化, 9天计时研发, 5天教学", items: [ { name: "会议", days: 1, type: "meeting", icon: "fa-users" }, { name: "学期结课", days: 1, type: "other", icon: "fa-flag" }, { name: "教研流程优化", days: 3, type: "other", icon: "fa-cogs" }, { name: "《计时与文明》课程研发", days: 9, type: "rd", icon: "fa-flask" }, { name: "教学", days: 5, type: "teaching", icon: "fa-book" } ] },
            2: { totalDays: 15, raw: "6天会议, 6天课程研发, 2天教学", items: [ { name: "会议", days: 6, type: "meeting", icon: "fa-users" }, { name: "《昆虫侦探》课程研发", days: 6, type: "rd", icon: "fa-bug" }, { name: "教学", days: 2, type: "teaching", icon: "fa-book" } ] },
            3: { totalDays: 25, raw: "6天飞书项目教研流程优化, 4天招聘与培训, 9天昆虫、特工、航海研发, 6天教学", items: [ { name: "飞书优化", days: 6, type: "other", icon: "fa-project-diagram" }, { name: "招聘培训", days: 4, type: "recruit", icon: "fa-user-plus" }, { name: "多项研发", days: 9, type: "rd", icon: "fa-flask" }, { name: "教学", days: 6, type: "teaching", icon: "fa-book" } ] },
            4: { totalDays: 20, raw: "1天会议, 1天招聘, 9天特工研发, 4天教学", items: [ { name: "会议", days: 1, type: "meeting", icon: "fa-users" }, { name: "招聘", days: 1, type: "recruit", icon: "fa-user-plus" }, { name: "《少年特工》课程研发", days: 9, type: "rd", icon: "fa-user-secret" }, { name: "教学", days: 4, type: "teaching", icon: "fa-book" } ] },
            5: { totalDays: 15, raw: "4天会议, 3天特工研发, 8天教学", items: [ { name: "会议", days: 4, type: "meeting", icon: "fa-users" }, { name: "研发", days: 3, type: "rd", icon: "fa-user-secret" }, { name: "教学", days: 8, type: "teaching", icon: "fa-book" } ] },
            6: { totalDays: 23, raw: "3天会议, 9天超时空、科协、赛事研发, 9天教学", items: [ { name: "会议", days: 3, type: "meeting", icon: "fa-users" }, { name: "综合研发", days: 9, type: "rd", icon: "fa-flask" }, { name: "教学", days: 9, type: "teaching", icon: "fa-book" } ] },
            7: { totalDays: 22, raw: "4天会议, 6天招聘, 4天可穿戴研发, 9天教学", items: [ { name: "会议", days: 4, type: "meeting", icon: "fa-users" }, { name: "招聘", days: 6, type: "recruit", icon: "fa-user-plus" }, { name: "《可穿戴设备》课程研发", days: 4, type: "rd", icon: "fa-microchip" }, { name: "教学", days: 9, type: "teaching", icon: "fa-book" } ] },
            8: { totalDays: 21, raw: "9天招聘, 7天研发, 5天教学", items: [ { name: "招聘", days: 9, type: "recruit", icon: "fa-user-plus" }, { name: "研发", days: 7, type: "rd", icon: "fa-flask" }, { name: "教学", days: 5, type: "teaching", icon: "fa-book" } ] },
            9: { totalDays: 21, raw: "5天招聘, 5天培训, 8天研发, 3天教学", items: [ { name: "招聘", days: 5, type: "recruit", icon: "fa-user-plus" }, { name: "培训", days: 5, type: "recruit", icon: "fa-chalkboard" }, { name: "研发", days: 8, type: "rd", icon: "fa-flask" }, { name: "教学", days: 3, type: "teaching", icon: "fa-book" } ] },
            10: { totalDays: 17, raw: "3天招聘, 2天培训, 6天研发, 3天教学", items: [ { name: "招聘", days: 3, type: "recruit", icon: "fa-user-plus" }, { name: "培训", days: 2, type: "recruit", icon: "fa-chalkboard" }, { name: "研发", days: 6, type: "rd", icon: "fa-flask" }, { name: "教学", days: 3, type: "teaching", icon: "fa-book" } ] },
            11: { totalDays: 22, raw: "2天招聘, 5天研发, 10天教学", items: [ { name: "招聘", days: 2, type: "recruit", icon: "fa-user-plus" }, { name: "研发", days: 5, type: "rd", icon: "fa-flask" }, { name: "教学", days: 10, type: "teaching", icon: "fa-book" } ] },
            12: { totalDays: 21, raw: "2天招聘, 2天整理校区, 7天研发, 8天教学", items: [ { name: "招聘", days: 2, type: "recruit", icon: "fa-user-plus" }, { name: "整理校区", days: 2, type: "other", icon: "fa-broom" }, { name: "研发", days: 7, type: "rd", icon: "fa-flask" }, { name: "教学", days: 8, type: "teaching", icon: "fa-book" } ] }
        };

        const navBox = document.getElementById('nav-box');
        for (let i = 1; i <= 12; i++) {
            const btn = document.createElement('button');
            btn.className = 'nav-btn';
            btn.innerHTML = `${i}月`;
            btn.onclick = function() { switchView(i, this); };
            navBox.appendChild(btn);
        }

        function switchView(viewName, btn) {
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll('.view-section').forEach(v => v.classList.remove('active-view'));

            if (viewName === 'summary') {
                document.getElementById('view-summary').classList.add('active-view');
            } else {
                renderMonth(viewName);
                document.getElementById('view-month').classList.add('active-view');
            }
        }

        function renderMonth(monthIndex) {
            const data = yearData[monthIndex];
            document.getElementById('month-title').innerHTML = `${monthIndex}月概览 (${data.totalDays}天)`;
            document.getElementById('month-raw-text').innerText = data.raw;

            const listContainer = document.getElementById('month-stat-list');
            listContainer.innerHTML = '';
            data.items.forEach(item => {
                let colorClass = `bg-${item.type}`;
                let li = document.createElement('li');
                li.className = 'stat-item';
                li.innerHTML = `<span><i class="fas ${item.icon}" style="width:16px"></i> ${item.name}</span> <span class="tag ${colorClass}">${item.days}天</span>`;
                listContainer.appendChild(li);
            });

            const gridContainer = document.getElementById('calendar-grid');
            gridContainer.innerHTML = '';
            data.items.forEach(item => {
                for (let d = 0; d < item.days; d++) {
                    const dayDiv = document.createElement('div');
                    dayDiv.className = `day-card bg-${item.type}`;
                    dayDiv.innerHTML = `<i class="fas ${item.icon}"></i> ${item.name}`;
                    dayDiv.title = item.name;
                    gridContainer.appendChild(dayDiv);
                }
            });
        }

        function initChart() {
            const ctx = document.getElementById('yearChart').getContext('2d');
            const labels = [];
            const datasets = { teaching: [], rd: [], recruit: [], meeting: [], other: [] };

            for (let m = 1; m <= 12; m++) {
                labels.push(`${m}月`);
                const d = yearData[m];
                let t=0, r=0, rec=0, meet=0, oth=0;
                d.items.forEach(item => {
                    if(item.type === 'teaching') t += item.days;
                    else if(item.type === 'rd') r += item.days;
                    else if(item.type === 'recruit') rec += item.days;
                    else if(item.type === 'meeting') meet += item.days;
                    else oth += item.days;
                });
                datasets.teaching.push(t); datasets.rd.push(r); datasets.recruit.push(rec); datasets.meeting.push(meet); datasets.other.push(oth);
            }

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [
                        { label: '教学', data: datasets.teaching, backgroundColor: '#52c41a' },
                        { label: '研发', data: datasets.rd, backgroundColor: '#722ed1' },
                        { label: '招聘/培训', data: datasets.recruit, backgroundColor: '#f5222d' },
                        { label: '会议', data: datasets.meeting, backgroundColor: '#fa8c16' },
                        { label: '其他', data: datasets.other, backgroundColor: '#8c8c8c' }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: { stacked: true, grid: {display:false} },
                        y: { stacked: true, beginAtZero: true, max: 31 }
                    },
                    plugins: { legend: { position: 'top', labels: {boxWidth: 12, font: {size: 11}} } }
                }
            });
        }

        window.onload = initChart;
    </script>
</body>
</html>
